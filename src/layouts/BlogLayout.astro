---
import { getDates } from "../../api/date";
import { getTags } from "../../api/tag";
import BreadCrumbs from "../components/BreadCrumbs.astro";
import H2 from "../components/H2.astro";
import PageHeading from "../components/PageHeading.astro";
import Wrapper from "../components/Wrapper.astro";
import BaseLayout from "./BaseLayout.astro";

const tags  = await getTags()
const dates = await getDates()

interface Props {
    pageHeading : string
}

const { pageHeading } = Astro.props
---

<BaseLayout
    title={`Blog Posts`}
    description=""
>

	<BreadCrumbs />
	
    <PageHeading>
        { pageHeading }
    </PageHeading>

    <section>
        <Wrapper padding="inline" class="relative grid md:grid-cols-[1fr_250px] gap-12">

            <div>
                <slot />
            </div>

			<div>
				<div class="relative border-l-4 border-b-4 border-sky-200/80 p-4">
					<h2 class="text-xl font-semibold text-sky-900">
						<a href="/blog/tag">More Topics</a>
					</h2>
					<div class="flex flex-wrap gap-x-3 gap-y-1 mb-6 mt-2 text-sm">
						{ tags.map( tag => (
							<a href={`/blog/tag/${tag.hyphen}`}>
								#{tag.space}
							</a>
						))}
					</div>
					<h2 class="text-xl font-semibold text-sky-900">
						<a href="/blog/date">Archive</a>
					</h2>
					<ul class="grid gap-2 mt-2 text-sm">
						{
							dates.map( (date) => (
								<li>
									<a href={'/blog/date/' + date.numeric} class="hover:underline">
										{date.phrase}
									</a>
								</li>
							))
						}
					</ul>
				</div>
			</div>

		</Wrapper>
	</section>
</BaseLayout>